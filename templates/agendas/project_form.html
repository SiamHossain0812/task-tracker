{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="h-full flex items-center justify-center p-4">
    <div
        class="card w-full max-w-lg bg-white rounded-3xl border border-gray-100 shadow-xl overflow-hidden animate-fade-in-up">
        <div class="px-8 py-6 border-b border-gray-100 bg-gray-50/50 flex items-center justify-between">
            <div>
                <h2 class="text-2xl font-bold text-gray-800 tracking-tight">{{ title }}</h2>
                <p class="text-xs font-semibold uppercase tracking-wider text-emerald-600 mt-1">
                    {% if project %}Edit Project{% else %}New Project{% endif %}
                </p>
            </div>
            <a href="{% url 'dashboard' %}"
                class="w-10 h-10 rounded-full flex items-center justify-center text-gray-400 hover:text-gray-800 hover:bg-white hover:shadow-sm transition-all border border-transparent hover:border-gray-200">
                <i class="fas fa-times text-lg"></i>
            </a>
        </div>

        <form method="POST" class="p-8 space-y-6">
            {% csrf_token %}

            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">Project Name <span
                        class="text-red-500">*</span></label>
                <input type="text" name="name" required value="{% if project %}{{ project.name }}{% endif %}"
                    class="w-full px-5 py-3 border border-gray-200 rounded-xl focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all placeholder-gray-400 font-medium text-lg"
                    placeholder="e.g. Website Redesign">
            </div>

            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">Description</label>
                <textarea name="description" rows="3"
                    class="w-full px-5 py-3 border border-gray-200 rounded-xl focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all placeholder-gray-400 font-medium resize-none"
                    placeholder="Brief description of the project...">{% if project %}{{ project.description }}{% endif %}</textarea>
            </div>

            <div class="bg-gray-50/50 p-6 rounded-2xl border border-gray-100">
                <label class="block text-sm font-bold text-gray-700 mb-4">Color Label</label>
                <div class="flex flex-wrap gap-4 mb-2">
                    {% for color_value, color_name in colors %}
                    <button type="button" onclick="selectColor('{{ color_value }}')"
                        class="color-btn w-10 h-10 rounded-full transition-all focus:outline-none bg-{{ color_value }}-500 hover:scale-110 shadow-sm border-2 border-transparent {% if project.color == color_value or not project and color_value == 'indigo' %}ring-2 ring-gray-300 scale-110 border-white{% endif %}"
                        data-color="{{ color_value }}" title="{{ color_name }}">
                    </button>
                    {% endfor %}
                </div>
                <input type="hidden" name="color" id="project-color"
                    value="{% if project %}{{ project.color }}{% else %}indigo{% endif %}">
            </div>

            <div class="pt-6 flex gap-4 border-t border-gray-100">
                <a href="{% url 'dashboard' %}"
                    class="flex-1 px-6 py-3.5 border border-gray-200 text-gray-600 font-bold rounded-xl text-center hover:bg-gray-50 hover:text-gray-800 transition-colors">Cancel</a>
                <button type="submit"
                    class="flex-1 px-6 py-3.5 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-700 hover:to-emerald-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-200 hover:shadow-emerald-300 transform transition-all hover:-translate-y-0.5">
                    {% if project %}Save Changes{% else %}Create Project{% endif %}
                </button>
            </div>
        </form>
    </div>

    <script>
        function selectColor(color) {
            document.getElementById('project-color').value = color;
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-gray-300', 'scale-110', 'border-white');
                if (btn.dataset.color === color) {
                    btn.classList.add('ring-2', 'ring-gray-300', 'scale-110', 'border-white');
                }
            });
        }
    </script>
</div>

{% endblock %}