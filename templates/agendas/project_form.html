{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

    {% block content %}
    <div class="card w-full max-w-lg mx-auto p-6">
        <div class="flex items-center justify-between mb-4">
            <div>
                <h2 class="text-xl font-bold text-gray-900">{{ title }}</h2>
                <p class="text-sm text-gray-500 mt-0.5">{% if project %}Edit details{% else %}Create a new project{% endif %}</p>
            </div>
            <a href="{% url 'dashboard' %}" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></a>
        </div>

        <form method="POST" class="space-y-6">
            {% csrf_token %}

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">Project Name <span
                        class="text-red-500">*</span></label>
                <input type="text" name="name" required value="{% if project %}{{ project.name }}{% endif %}"
                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder-gray-400"
                    placeholder="e.g. Website Redesign">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">Description</label>
                <textarea name="description" rows="3"
                    class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder-gray-400"
                    placeholder="Brief description of the project...">{% if project %}{{ project.description }}{% endif %}</textarea>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-3">Color Label</label>
                <div class="flex flex-wrap gap-3 mb-3">
                    {% for color_value, color_name in colors %}
                    <button type="button" onclick="selectColor('{{ color_value }}')"
                        class="color-btn w-8 h-8 rounded-full transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 bg-{{ color_value }}-500 hover:scale-110 {% if project.color == color_value or not project and color_value == 'indigo' %}ring-2 ring-offset-2 ring-gray-400 scale-110{% endif %}"
                        data-color="{{ color_value }}" title="{{ color_name }}"></button>
                    {% endfor %}
                </div>
                <input type="hidden" name="color" id="project-color"
                    value="{% if project %}{{ project.color }}{% else %}indigo{% endif %}">
            </div>

            <div class="pt-2 flex gap-3">
                <a href="{% url 'dashboard' %}"
                    class="flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 text-center transition-colors">Cancel</a>
                <button type="submit"
                    class="flex-1 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg shadow-sm transition-colors">{% if project %}Save Changes{% else %}Create Project{% endif %}</button>
            </div>
        </form>
    </div>

    <script>
        function selectColor(color) {
            document.getElementById('project-color').value = color;
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-offset-2', 'ring-gray-400', 'scale-110');
                if (btn.dataset.color === color) {
                    btn.classList.add('ring-2', 'ring-offset-2', 'ring-gray-400', 'scale-110');
                }
            });
        }
    </script>

    {% endblock %}